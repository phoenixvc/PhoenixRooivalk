# MVP 10-class dataset configuration for Phoenix Rooivalk
# Use this for 1-week prototype (~$15 training cost on Azure ML)
#
# Usage:
#   # Local training (set DATASET_PATH env var or use default)
#   python train.py --data configs/dataset-mvp.yaml
#
#   # Azure ML (path injected via job inputs)
#   The Azure ML job automatically replaces the path with the datastore location
#
# Dataset structure expected:
#   {path}/
#   ├── images/
#   │   ├── train/
#   │   └── val/
#   ├── labels/
#   │   ├── train/
#   │   └── val/
#   └── dataset.yaml (this file, copied to dataset root)

# Path configuration
# - For local: ./data/combined or absolute path
# - For Azure ML: Overridden by job input (${{inputs.dataset}})
# - Environment variable DATASET_PATH takes precedence
path: ./data/combined

train: images/train
val: images/val
test: images/test  # Optional, for final evaluation

# Number of classes
nc: 10

# Class names with descriptions
names:
  0: drone           # All drones (multirotor, fixed-wing, racing, toy, commercial)
  1: bird_small      # Small birds (<40cm wingspan) - sparrows, finches, starlings
  2: bird_large      # Large birds + flocks (>40cm wingspan) - eagles, geese, flocks
  3: aircraft        # All manned aircraft (planes, helis, gliders, balloons)
  4: recreational    # Kites, party balloons, weather balloons, RC planes, lanterns
  5: sports          # Balls, frisbees, projectiles in flight
  6: debris          # Plastic bags, paper, leaves, seeds, feathers
  7: insect          # Flying insects close to camera (common false positive)
  8: atmospheric     # Weather (rain/snow), lens artifacts, reflections
  9: background      # Sky, clouds, nothing detected (negative class)

# Mapping from MVP classes to full 27-class taxonomy (for future upgrade)
# This enables seamless transition when more training data is available
full_taxonomy_mapping:
  0: [0, 1, 2, 3, 4]           # drone -> drone_multirotor, drone_fixedwing, drone_vtol, drone_racing, drone_toy
  1: [5, 6]                    # bird_small -> bird_tiny, bird_small
  2: [7, 8, 9]                 # bird_large -> bird_medium, bird_large, bird_flock
  3: [10, 11, 12, 13]          # aircraft -> aircraft_fixed, aircraft_rotary, aircraft_glider, aircraft_balloon
  4: [14, 15, 16, 17, 18]      # recreational -> kite, balloon_party, balloon_weather, lantern, rc_plane
  5: [19, 20]                  # sports -> ball, projectile
  6: [21, 22]                  # debris -> debris_light, debris_organic
  7: [23]                      # insect -> insect
  8: [24, 25]                  # atmospheric -> weather, artifact
  9: [26]                      # background -> background

# Alert configuration
# Classes that trigger security alerts
alert_classes: [0]  # Only drones trigger alerts

# Critical non-alert classes
# These must NOT be misclassified as drones (safety critical)
critical_non_alert: [3]  # Manned aircraft - misclassification could cause incidents

# Class weights for imbalanced datasets (optional)
# Increase weight for underrepresented classes
# class_weights:
#   0: 1.0    # drone - usually well represented
#   1: 1.0    # bird_small
#   2: 1.5    # bird_large - often underrepresented
#   3: 2.0    # aircraft - rare but critical
#   4: 1.2    # recreational
#   5: 1.0    # sports
#   6: 1.0    # debris
#   7: 0.8    # insect - often overrepresented
#   8: 0.8    # atmospheric
#   9: 0.5    # background - usually overrepresented

# Augmentation hints (used by training script)
augmentation:
  # Enable aggressive augmentation for small datasets
  mosaic: 1.0
  mixup: 0.1
  # Scale augmentation important for drones at varying distances
  scale: 0.5
  # Rotation for drones viewed from different angles
  degrees: 10.0

# Evaluation settings
evaluation:
  # Minimum confidence for predictions
  conf_threshold: 0.25
  # IoU threshold for NMS
  iou_threshold: 0.45
  # Maximum detections per image
  max_det: 100
