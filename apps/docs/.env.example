# Phoenix Rooivalk Documentation Configuration
# Copy this file to .env.local for local development
# For production, set these in your hosting platform (GitHub Secrets, Azure, etc.)

# =============================================================================
# Cloud Provider Selection
# =============================================================================
# Set to 'azure' for Azure services, or 'offline' for local-only mode
CLOUD_PROVIDER=azure

# =============================================================================
# Onboarding Configuration
# =============================================================================
# Enable/disable skip button on signup/profile completion form
# Set to 'false' to require users to complete signup
ENABLE_SKIP_SIGNUP=true
ENABLE_SKIP_PROFILE_COMPLETION=true

# Require profile details (name, LinkedIn, Discord) to be filled out
# Set to 'true' to make profile completion mandatory
REQUIRE_PROFILE_DETAILS=false

# =============================================================================
# Azure AD B2C Configuration (Recommended for self-registration)
# =============================================================================
# Get these from: Azure Portal → Azure AD B2C → App registrations → Your app
#
# For B2C with self-registration, use these settings:

# Required - Application (client) ID from B2C app registration
AZURE_ENTRA_CLIENT_ID=your-b2c-client-id-here

# Required - B2C Tenant ID (Directory ID)
AZURE_ENTRA_TENANT_ID=your-b2c-tenant-id-here

# Required for B2C - Authority URL with user flow
# Format: https://{tenant}.b2clogin.com/{tenant}.onmicrosoft.com/{policy}
# Example: https://phoenixrooivalkb2c.b2clogin.com/phoenixrooivalkb2c.onmicrosoft.com/B2C_1_signupsignin
AZURE_ENTRA_AUTHORITY=https://your-tenant.b2clogin.com/your-tenant.onmicrosoft.com/B2C_1_signupsignin

# Optional - Redirect URI after login (defaults to current origin)
AZURE_ENTRA_REDIRECT_URI=http://localhost:3000

# Optional - Redirect URI after logout (defaults to current origin)
AZURE_ENTRA_POST_LOGOUT_REDIRECT_URI=http://localhost:3000

# Optional - OAuth scopes (B2C typically uses openid and custom scopes)
AZURE_ENTRA_SCOPES=openid profile email

# =============================================================================
# Azure Services Configuration
# =============================================================================
# Azure Functions base URL (for AI/backend functions)
AZURE_FUNCTIONS_BASE_URL=https://your-function-app.azurewebsites.net

# Azure Application Insights (optional, for analytics)
AZURE_APP_INSIGHTS_CONNECTION_STRING=InstrumentationKey=xxx;IngestionEndpoint=xxx

# =============================================================================
# Alternative: Regular Azure AD (Single Tenant - No Self-Registration)
# =============================================================================
# If using regular Azure AD instead of B2C:
# AZURE_ENTRA_AUTHORITY=https://login.microsoftonline.com/your-tenant-id-here
# AZURE_ENTRA_SCOPES=openid profile email User.Read

# =============================================================================
# Notes
# =============================================================================
# - These environment variables are read at BUILD TIME for Docusaurus
# - Azure client configs are exposed to the browser (this is expected)
# - Security is handled via backend rules (Azure RBAC), not by hiding keys
# - Never commit .env.local to version control
#
# B2C User Flow Setup:
# 1. Azure Portal → Azure AD B2C → User flows → New user flow
# 2. Select "Sign up and sign in" → Recommended
# 3. Name: "signupsignin" (becomes B2C_1_signupsignin)
# 4. Enable identity providers: Local accounts, Google, GitHub, etc.
# 5. Select claims to collect and return
