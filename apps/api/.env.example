# Phoenix Rooivalk API Environment Variables
# Copy this file to .env for local development
# For production, set these in your hosting platform or CI secrets

# =============================================================================
# Server Configuration
# =============================================================================

# Server port (default: 8080)
PORT=8080

# Log level for the tracing subscriber
# Values: error, warn, info, debug, trace (or module-level filters like 'info,phoenix_api=debug')
RUST_LOG=info

# =============================================================================
# Database Configuration
# =============================================================================
# URL priority: API_DB_URL > KEEPER_DB_URL > hardcoded default
# The API will fall back to KEEPER_DB_URL if API_DB_URL is not set,
# allowing the API and keeper to share a database in simple deployments.

# Primary SQLite database URL for the API
# Optional: falls back to KEEPER_DB_URL, then 'sqlite://blockchain_outbox.sqlite3'
API_DB_URL=sqlite://api.sqlite3

# Fallback: shared SQLite database URL (used if API_DB_URL is not set)
# Optional: only needed when sharing a database with the keeper service
# KEEPER_DB_URL=sqlite://blockchain_outbox.sqlite3

# =============================================================================
# x402 Payment Protocol (optional — disabled by default)
# =============================================================================
# The x402 protocol monetises premium evidence verification endpoints.
# All x402 variables are optional. The feature is fully disabled unless
# X402_ENABLED=true is set.
#
# Endpoints affected:
#   POST /api/v1/evidence/verify-premium
#   GET  /api/v1/x402/status
#
# These endpoints are machine-to-machine (M2M) only — Bearer token required.

# Set to 'true' or '1' to enable x402 payment processing (default: false)
X402_ENABLED=false

# Required if X402_ENABLED=true: Solana wallet address to receive USDC payments
# Never commit a real wallet address with funds to version control
X402_WALLET_ADDRESS=

# x402 facilitator service URL (payment verification intermediary)
# Default: https://x402.org/facilitator
# X402_FACILITATOR_URL=https://x402.org/facilitator

# Minimum payment amount in USDC (prevents dust attacks)
# Default: 0.001
# X402_MIN_PAYMENT=0.001

# Enable the legal attestation price tier (preview/WIP — HSM not yet implemented)
# Default: false  — tier returns 503 even when x402 is enabled
# X402_LEGAL_ATTESTATION_ENABLED=false

# =============================================================================
# Solana Configuration (used by x402 payment verification)
# =============================================================================

# Solana RPC endpoint for on-chain payment verification
# Default: https://api.devnet.solana.com
# SOLANA_RPC_URL=https://api.devnet.solana.com

# Solana network: 'devnet' or 'mainnet-beta'
# Default: devnet
# SOLANA_NETWORK=devnet
